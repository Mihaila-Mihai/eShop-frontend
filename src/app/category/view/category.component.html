<app-category-bar></app-category-bar>
<section>
  <div *ngIf="products$ | async as response" class="content d-flex flex-column p-0">
    <div class="sort d-flex justify-content-end">
      <mat-form-field appearance="outline" color="primary" class="rounded-0">
        <mat-select [value]="sortOrder$ | async" (selectionChange)="changeOrder($event)">
          <mat-option [value]="sortOptions.ASC">Preț crescător</mat-option>
          <mat-option [value]="sortOptions.DESC">Preț descrescător</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="d-flex">
      <div class="filters">
        <app-filters [filterGroups]="response.filterGroups"></app-filters>
      </div>
      <ng-container *ngIf="keys.length; else noProducts">
        <div *ngIf="prods$ | async as prods" class="row m-0 pt-11 flex-grow-1 align-content-start d-flex">
          <div class="product-container" *ngFor="let product of keys">
            <div *ngIf="getProduct(prods, product) as productFinal">
              <app-product-card [product]="productFinal"></app-product-card>
            </div>
          </div>
          <div *ngIf="keys.length" class="col-12 d-flex justify-content-center align-items-end">
            <button mat-flat-button color="primary" class="rounded-0"> SHOW MORE </button>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</section>


<ng-template #noProducts>
  <p> Din păcate, nu am reușit să găsim produse! </p>
</ng-template>
